let productData = {
  Burgers: [
    {
      itemCode: "B1001",
      name: "Classic Burger (Large)",
      price: 750.0,
      discount: 0,
      quantity: 1,
      expiryDate: "2025-01-30",
      img: "../image/product/Burger/Classic Burger (Large).png",
    },
    {
      itemCode: "B1002",
      name: "Classic Burger (Regular)",
      price: 1500.0,
      discount: 15,
      quantity: 1,
      expiryDate: "2024-12-31",
      img: "../image/product/Burger/Classic Burger (Regular).png",
    },
    {
      itemCode: "B1003",
      name: "Turkey Burger",
      price: 1600.0,
      discount: 0,
      discount: 15,
      quantity: 1,
      expiryDate: "2025-01-30",
      img: "../image/product/Burger/Turkey Burger.png",
    },
    {
      itemCode: "B1004",
      name: "Chicken Burger (Large) ",
      price: 1400.0,
      discount: 5,
      quantity: 1,
      expiryDate: "2024-12-31",
      img: "../image/product/Burger/Chicken Burger (Large).png",
    },
    {
      itemCode: "B1005",
      name: "Chicken Burger (Regular)",
      price: 800.0,
      discount: 20,
      quantity: 1,
      expiryDate: "2025-01-30",
      img: "../image/product/Burger/Chicken Burger (Regular).jpg",
    },
    {
      itemCode: "B1006",
      name: "Cheese Burger (Large)",
      price: 1000.0,
      discount: 0,
      quantity: 1,
      expiryDate: "2025-01-30",
      img: "../image/product/Burger/Cheese Burger (Large).png",
    },
    {
      itemCode: "B1007",
      name: "Cheese Burger (Regular)",
      price: 600.0,
      discount: 0,
      quantity: 1,
      expiryDate: "2024-12-31",
      img: "../image/product/Burger/Cheese Burger (Regular).png",
    },
    {
      itemCode: "B1008",
      name: "Bacon Burger",
      price: 650.0,
      discount: 15,
      quantity: 1,
      expiryDate: "2025-01-30",
      img: "../image/product/Burger/Bacon Burger.png",
    },
    {
      itemCode: "B1009",
      name: "Shawarma Burger",
      price: 800.0,
      discount: 0,
      quantity: 1,
      expiryDate: "2024-12-31",
      img: "../image/product/Burger/Shawarma Burger.webp",
    },
    {
      itemCode: "B1010",
      name: "Olive Burger",
      price: 1800.0,
      discount: 0,
      quantity: 1,
      expiryDate: "2025-01-30",
      img: "../image/product/Burger/Olive Burger.png",
    },
    {
      itemCode: "B1011",
      name: "Double-Cheese Burger",
      price: 1250.0,
      discount: 20,
      quantity: 1,
      expiryDate: "2024-12-31",
      img: "../image/product/Burger/Double-Cheese Burger.png",
    },
    {
      itemCode: "B1012",
      name: "Crispy Chicken Burger (Regular)",
      price: 1200.0,
      discount: 0,
      quantity: 1,
      expiryDate: "2025-01-30",
      img: "../image/product/Burger/Crispy Chicken Burger (Regular) .png",
    },
    {
      itemCode: "B1013",
      name: "Crispy Chicken Burger (Large)",
      price: 1600.0,
      discount: 10,
      quantity: 1,
      expiryDate: "2025-01-30",
      img: "../image/product/Burger/Crispy Chicken Burger (Large) .png",
    },
    {
      itemCode: "B1014",
      name: "Paneer Burger",
      price: 900.0,
      discount: 0,
      quantity: 1,
      expiryDate: "2025-01-30",
      img: "../image/product/Burger/Paneer Burger.png",
    },
  ],
  Submarines: [
    {
      itemCode: "B10016",
      name: "Crispy Chicken Submarine (Large)",
      price: 2000.0,
      discount: 0,
      quantity: 1,
      expiryDate: "2025-01-30",
      img: "../image/product/Submarines/Crispy Chicken Submarine (Large).png",
    },
    {
      itemCode: "B10017",
      name: "Crispy Chicken Submarine (Regular)",
      price: 1500.0,
      discount: 0,
      quantity: 1,
      expiryDate: "2025-01-30",
      img: "../image/product/Submarines/Crispy Chicken Submarine (Regular).png",
    },
    {
      itemCode: "B10018",
      name: "Chicken Submarine (Large) ",
      price: 1800.0,
      discount: 3,
      quantity: 1,
      expiryDate: "2024-12-31",
      img: "../image/product/Submarines/Chicken Submarine (Large).png",
    },
    {
      itemCode: "B10019",
      name: "Chicken Submarine (Regular) ",
      price: 1400.0,
      discount: 0,
      quantity: 1,
      expiryDate: "2025-01-30",
      img: "../image/product/Submarines/Chicken Submarine (Regular).png",
    },
    {
      itemCode: "B10020",
      name: "Grinder Submarine",
      price: 2300.0,
      discount: 0,
      quantity: 1,
      expiryDate: "2025-01-30",
      img: "../image/product/Submarines/Grinder Submarine.png",
    },
    {
      itemCode: "B10021",
      name: "Cheese Submarine ",
      price: 2200.0,
      discount: 0,
      quantity: 1,
      expiryDate: "2025-01-30",
      img: "../image/product/Submarines/Cheese Submarine.png",
    },
    {
      itemCode: "B10022",
      name: "Double Cheese n Chicken Submarine ",
      price: 1900.0,
      discount: 16,
      quantity: 1,
      expiryDate: "2025-01-30",
      img: "../image/product/Submarines/Double Cheese n Chicken Submarine.png",
    },
    {
      itemCode: "B10023",
      name: "Special Horgie Submarine",
      price: 2800.0,
      discount: 0,
      quantity: 1,
      expiryDate: "2025-01-30",
      img: "../image/product/Submarines/Special Horgie Submarine.png",
    },
    {
      itemCode: "B10024",
      name: "MOS Special Submarine",
      price: 3000.0,
      discount: 0,
      quantity: 1,
      expiryDate: "2025-01-30",
      img: "../image/product/Submarines/MOS Special Submarine.png",
    },
  ],
  Fries: [
    {
      itemCode: "B10025",
      name: "Steak Fries (Large)",
      price: 1200.0,
      discount: 0,
      quantity: 1,
      expiryDate: "2025-01-30",
      img: "../image/product/Fries/Steak Fries (Large).png",
    },
    {
      itemCode: "B10026",
      name: "Steak Fries (Medium)",
      price: 600.0,
      discount: 0,
      quantity: 1,
      expiryDate: "2025-01-30",
      img: "../image/product/Fries/Steak Fries (Medium).png",
    },
    {
      itemCode: "B10027",
      name: "French Fries (Large)",
      price: 800.0,
      discount: 0,
      quantity: 1,
      expiryDate: "2025-01-30",
      img: "../image/product/Fries/French Fries (Large).png",
    },
    {
      itemCode: "B10028",
      name: "French Fries (Medium)",
      price: 650.0,
      discount: 0,
      quantity: 1,
      expiryDate: "2025-01-30",
      img: "../image/product/Fries/French Fries (Medium).png",
    },
    {
      itemCode: "B10029",
      name: "French Fries (Small)",
      price: 450.0,
      discount: 0,
      quantity: 1,
      expiryDate: "2024-12-31",
      img: "../image/product/Fries/French Fries (Small).png",
    },
    {
      itemCode: "B10030",
      name: "Sweet Potato Fries (Large)",
      price: 600.0,
      discount: 0,
      quantity: 1,
      expiryDate: "2024-12-31",
      img: "../image/product/Fries/Sweet Potato Fries (Large).png",
    },
  ],
  Pasta: [
    {
      itemCode: "B10031",
      name: "Chicken n Cheese Pasta",
      price: 1600.0,
      discount: 15,
      quantity: 1,
      expiryDate: "2025-01-30",
      img: "../image/product/Pasta/Chicken n Cheese Pasta.png",
    },
    {
      itemCode: "B10032",
      name: "Chicken Penne Pasta ",
      price: 1700.0,
      discount: 0,
      quantity: 1,
      expiryDate: "2025-01-30",
      img: "../image/product/Pasta/Chicken Penne Pasta.png",
    },
    {
      itemCode: "B10033",
      name: "Ground Turkey Pasta Bake",
      price: 2900.0,
      discount: 10,
      quantity: 1,
      expiryDate: "2025-01-30",
      img: "../image/product/Pasta/Ground Turkey Pasta Bake.png",
    },
    {
      itemCode: "B10034",
      name: "Creamy Shrimp Pasta ",
      price: 2000.0,
      discount: 0,
      quantity: 1,
      expiryDate: "2025-01-30",
      img: "../image/product/Pasta/Creamy Shrimp Pasta.png",
    },
    {
      itemCode: "B10035",
      name: "Lemon Butter Pasta",
      price: 1950.0,
      discount: 0,
      quantity: 1,
      expiryDate: "2024-12-31",
      img: "../image/product/Pasta/Lemon Butter Pasta.png",
    },
    {
      itemCode: "B10036",
      name: "Tagliatelle Pasta",
      price: 2400.0,
      discount: 1,
      quantity: 1,
      expiryDate: "2024-12-31",
      img: "../image/product/Pasta/Tagliatelle Pasta.png",
    },
    {
      itemCode: "B10037",
      name: "Baked Ravioli",
      price: 2000.0,
      discount: 1,
      quantity: 1,
      expiryDate: "2025-01-30",
      img: "../image/product/Pasta/Baked Ravioli .png",
    },
  ],

  Chicken: [
    {
      itemCode: "B1038",
      name: "Fried Chicken (Small)",
      price: 1200.0,
      discount: 0,
      quantity: 1,
      expiryDate: "2025-01-30",
      img: "../image/product/Chicken/Fried Chicken (Small).webp",
    },
    {
      itemCode: "B10039",
      name: "Fried Chicken (Regular)",
      price: 2300.0,
      discount: 10,
      quantity: 1,
      expiryDate: "2025-01-30",
      img: "../image/product/Chicken/Fried Chicken (Regular) .png",
    },
    {
      itemCode: "B10040",
      name: "Fried Chicken (Large)",
      price: 3100.0,
      discount: 5,
      quantity: 1,
      expiryDate: "2025-01-30",
      img: "../image/product/Chicken/Fried Chicken (Large).png",
    },
    {
      itemCode: "B10041",
      name: "Hot Wings (Large) ",
      price: 2400.0,
      discount: 0,
      quantity: 1,
      expiryDate: "2025-01-30",
      img: "../image/product/Chicken/Hot Wings (Large) .png",
    },
    {
      itemCode: "B10042",
      name: "Devilled Chicken (Large)",
      price: 900.0,
      discount: 0,
      quantity: 1,
      expiryDate: "2025-01-30",
      img: "../image/product/Chicken/Devilled Chicken (Large).png",
    },
    {
      itemCode: "B10043",
      name: "BBQ Chicken (Regular)",
      price: 2100.0,
      discount: 0,
      quantity: 1,
      expiryDate: "2024-12-31",
      img: "../image/product/Chicken/BBQ Chicken (Regular).png",
    },
  ],
  Beverages: [
    {
      itemCode: "B10032",
      name: "Pepsi (330ml)",
      price: 990.0,
      discount: 5,
      quantity: 1,
      expiryDate: "2025-01-30",
      img: "../image/product/Beverages/Pepsi (330ml).png",
    },
    {
      itemCode: "B10033",
      name: "Coca-Cola (330ml)",
      price: 1230.0,
      discount: 0,
      quantity: 1,
      expiryDate: "2025-01-30",
      img: "../image/product/Beverages/Coca-Cola (330ml).png",
    },
    {
      itemCode: "B10034",
      name: "Sprite (330ml)",
      price: 1500.0,
      discount: 3,
      quantity: 1,
      expiryDate: "2025-01-30",
      img: "../image/product/Beverages/Sprite (330ml) .png",
    },
    {
      itemCode: "B10035",
      name: "Mirinda (330ml)",
      price: 850.0,
      discount: 7,
      quantity: 1,
      expiryDate: "2025-01-30",
      img: "../image/product/Beverages/Mirinda (330ml).png",
    },
  ],
};

// export function fetchProducts() {
//   readProductsFromStorage();
//   return productData;
// }

// function readProductsFromStorage() {
//   const productJSON = localStorage.getItem("product");
//   if (productJSON) {
//     return JSON.parse(productJSON);
//   }
//   return productData;
// }

// export function addProduct(productObj, category) {
//   productData[category].push(productObj);
//   saveProductsToStorage();
//   console.log(productData[category]);
// }

// export function removeProduct(index, category) {
//   console.log("remove ekata awa", index, category);
//   productData[category].splice(index, 1);
//   saveProductsToStorage();
//   console.log(productData[category]);
// }

// function saveProductsToStorage() {
//   localStorage.setItem("productData", JSON.stringify(productData));
// }



// let productData = {}; // Initialize in-memory array

export function fetchProducts() {
  return readProductsFromStorage(); // Always fetch latest state
}

function readProductsFromStorage() {
  const productJSON = localStorage.getItem("productData"); // Use consistent key
  if (productJSON) {
    productData = JSON.parse(productJSON); // Update in-memory data
    return productData;
  }
  return productData || {}; // Initialize as empty object if undefined
}

export function addProduct(productObj, category) {
  if (!productData[category]) {
    productData[category] = []; // Initialize category array if undefined
  }
  productData[category].push(productObj);
  saveProductsToStorage(); // Save to localStorage
  console.log(productData[category]);
}

export function removeProduct(index, category) {
  if (productData[category]) {
    console.log("Removing product:", index, category);
    productData[category].splice(index, 1);
    saveProductsToStorage(); // Save updated data
    console.log(productData[category]);
  } else {
    console.error("Category not found:", category);
  }
}

function saveProductsToStorage() {
  localStorage.setItem("productData", JSON.stringify(productData)); // Save all products
}
